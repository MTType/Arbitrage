<!DOCTYPE html>
<html>
    <head>
        <title>ARBITRAGE!</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="stylesheet" href="@{'/public/stylesheets/styles.css'}">
	<link href='http://fonts.googleapis.com/css?family=Quicksand:400,700' rel='stylesheet' type='text/css'>
        
    </head>
    
<body id="endscreen">
    <div class="content">
    <div id="left">    
    <div id="welldone">
    <h1>Well Done!</h1> 
    </div>
    <div id="stats">
        <h2>Your Stats</h2>
        <p id="playerCash"></p>
        <p id="playerPB"></p>
        <p id="playerOJ"></p>
        <p id="playerSB"></p>
    </div>
    
    <a href="index"><button ><h3>Exit</h3></button></a>
    
    
    </div>
        
    <div id="highscores">
        <img src="@{'/public/images/trophy.png'}" alt="trophy">
        <h2>High Scores</h2>
        <table>
            <tr><td id="highscorename1"></td><td id="highscore1" class="score"></td></tr>
            <tr><td id="highscorename2"></td><td id="highscore2" class="score"></td></tr>
            <tr><td id="highscorename3"></td><td id="highscore3" class="score"></td></tr>
            <tr><td id="highscorename4"></td><td id="highscore4" class="score"></td></tr>
            <tr><td id="highscorename5"></td><td id="highscore5" class="score"></td></tr>
            <tr><td id="highscorename6"></td><td id="highscore6" class="score"></td></tr>
            <tr><td id="highscorename7"></td><td id="highscore7" class="score"></td></tr>
            <tr><td id="highscorename8"></td><td id="highscore8" class="score"></td></tr>
            <tr><td id="highscorename9"></td><td id="highscore9" class="score"></td></tr>
            <tr><td id="highscorename10"></td><td id="highscore10" class="score"></td></tr>
        </table>
    </div>
         
     </div>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
    window.onload = function() {
        updateHighScores();
        getPlayerInformation();
    }
    
    function updateHighScores(){
        $.ajax({
            url: 'http://localhost:9000/getHighScores',
            type: 'GET',
            dataType: 'json',
            success: function(json){
                var scoreCount = 1;
                for (var i in json) {
                    document.getElementById("highscorename" + scoreCount).innerHTML = json[i].name;
                    document.getElementById("highscore" + scoreCount).innerHTML = json[i].score;
                    scoreCount++;
                }  
            }
        });
    }
    
    function getPlayerInformation(){
        $.ajax({
            url: 'http://localhost:9000/getPlayerInformation',
            type: 'GET',
            dataType: 'json',
            success: function(json){            
                var cash = document.getElementById('playerCash');
                cash.innerHTML = "You finished the game with: Â£ " + json["cash"];
                
                var playerPB = document.getElementById('playerPB');
                playerPB.innerHTML = json["porkBelliesTotal"] + " pork bellies eaten";
                
                var playerOJ = document.getElementById('playerOJ');
                playerOJ.innerHTML = json["frozenOrangeJuiceTotal"] + " frozen orange juice melted";
                
                var playerSB = document.getElementById('playerSB');
                playerSB.innerHTML = json["soyBeansTotal"] + " soy beans crushed";
            }
        });
    }

</script>
</body>